{"ast":null,"code":"import _asyncToGenerator from \"/Users/eduardo/Dropbox/Development/JavaScript/Node/Electron/bluetooth-serial/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./required-modules.service\";\n// import { Observable, bindNodeCallback } from 'rxjs';\nlet BluetoothService = /*#__PURE__*/(() => {\n  class BluetoothService {\n    constructor(requiredModulesService) {\n      this.requiredModulesService = requiredModulesService;\n      this.getOsAsObservable = this.requiredModulesService.os.platform;\n    }\n    callCLICommand(command) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        return new Promise((resolve, reject) => {\n          _this.requiredModulesService.child_process.exec(command, (error, stdout, stderr) => {\n            if (error) {\n              // console.log(`error: ${error.message}`);\n              reject(error);\n            }\n            if (stderr) {\n              // console.log(`stderr: ${stderr}`);\n              reject(stderr);\n            }\n            resolve(stdout);\n          });\n        });\n      })();\n    }\n    getBluetoothDevices() {\n      var _this2 = this;\n      return _asyncToGenerator(function* () {\n        let platform = _this2.getOsAsObservable();\n        let response = '';\n        if (platform === 'darwin') {\n          yield _this2.callCLICommand('blueutil --paired').then(data => {\n            let lines = data.split('\\n');\n            for (let index = 0; index < lines.length; index++) {\n              const element = lines[index];\n              console.log(element);\n            }\n            response = data;\n          });\n          return response;\n        } else if (platform === 'linux') {\n          yield _this2.callCLICommand('bluetoothctl devices').then(data => {\n            response = data;\n          });\n          return response;\n        } else if (platform === 'win32') {\n          //Change\n          yield _this2.callCLICommand('bluetoothctl devices').then(data => {\n            response = data;\n          });\n          return response;\n        }\n        return '';\n      })();\n    }\n  }\n  BluetoothService.ɵfac = function BluetoothService_Factory(t) {\n    return new (t || BluetoothService)(i0.ɵɵinject(i1.RequiredModulesService));\n  };\n  BluetoothService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: BluetoothService,\n    factory: BluetoothService.ɵfac,\n    providedIn: 'root'\n  });\n  return BluetoothService;\n})();\nexport { BluetoothService };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}