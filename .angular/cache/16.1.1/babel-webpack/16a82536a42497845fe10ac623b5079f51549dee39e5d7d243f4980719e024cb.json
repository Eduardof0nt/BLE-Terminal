{"ast":null,"code":"import _asyncToGenerator from \"/Users/eduardo/Dropbox/Development/JavaScript/Node/Electron/bluetooth-serial/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./services/required-modules.service\";\nlet WebsocketService = /*#__PURE__*/(() => {\n  class WebsocketService {\n    constructor(requiredModulesService) {\n      this.requiredModulesService = requiredModulesService;\n      this.ws = this.requiredModulesService.ws;\n      this.portScanner = this.requiredModulesService.portscanner;\n    }\n    testWebSocketPort(port) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        let ws = new _this.ws.WebSocket('ws://localhost:' + port);\n        let open = false;\n        ws.on('open', () => {\n          open = true;\n        });\n        ws.on('error', error => {\n          console.log(typeof error);\n        });\n        return yield new Promise((res, rej) => {\n          setTimeout(() => {\n            res(open);\n          }, 1000);\n        });\n      })();\n    }\n    newWebSocket(port) {\n      return new this.ws.WebSocketServer({\n        port: port,\n        perMessageDeflate: {\n          zlibDeflateOptions: {\n            // See zlib defaults.\n            chunkSize: 1024,\n            memLevel: 7,\n            level: 3\n          },\n          zlibInflateOptions: {\n            chunkSize: 10 * 1024\n          },\n          // Other options settable:\n          clientNoContextTakeover: true,\n          serverNoContextTakeover: true,\n          serverMaxWindowBits: 10,\n          // Below options specified as default values.\n          concurrencyLimit: 10,\n          threshold: 1024 // Size (in bytes) below which messages\n          // should not be compressed if context takeover is disabled.\n        }\n      });\n    }\n  }\n\n  WebsocketService.ɵfac = function WebsocketService_Factory(t) {\n    return new (t || WebsocketService)(i0.ɵɵinject(i1.RequiredModulesService));\n  };\n  WebsocketService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: WebsocketService,\n    factory: WebsocketService.ɵfac,\n    providedIn: 'root'\n  });\n  return WebsocketService;\n})();\nexport { WebsocketService };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}